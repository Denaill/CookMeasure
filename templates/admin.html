{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <div class="row" style="margin-top: 5vh;">
        <div class="col ">
            <div class="card">
                <div class="card-content">
                    <div class="card-title center">
                        Añadir una nueva receta
                    </div>
                    <form method="POST" action="{{ url_for('admin') }}" enctype=multipart/form-data>
                        <div class="row">
                            <div class="input-field col s12">
                                <input name="usuario" id="usuario" type="hidden" value="{{session['nickname']}}" class="validate" required>
                            </div>
                            <div class="input-field col s12">
                                <input placeholder="Nombre de la receta" name="title" id="title" type="text" class="validate" required>
                                <label for="title">Título</label>
                            </div>
                            <div class="input-field col s12">
                                <input placeholder="Tiempo en minutos" name="tiempo" id="tiempo" type="text" class="validate" required>
                                <label for="tiempo">Tiempo de preparación</label>
                            </div>
                            <div class="input-field col s12">
                                <input placeholder="Descripción" name="description" id="description" type="text" class="validate" required>
                                <label for="description">Descripción de la receta</label>
                            </div>
                            <div class="input-field col s12">
                                <input placeholder="Ingredientes1, Ingrediente2, Ingrediente3, etc" name="ingredientes" id="ingredientes" type="text" class="validate" required>
                                <label for="description">Añade los ingredientes separandolos por una coma (, )</label>
                            </div>
                            <div class="input-field col s12">
                                <textarea placeholder="Preparacion" name="preparacion" id="preparacion" type="text" class="materialize-textarea validate" required></textarea>
                                <label for="preparacion">Preparación de la receta</label>
                            </div>
                            <!--<div class="col s12">
                                <div class="row">
                                    <form class="col s12">
                                    <div class="row">
                                        <div class="input-field col s12">
                                        <textarea id="preparacion" class="materialize-textarea"></textarea>
                                        <label for="preparacion">Preparación de la receta</label>
                                        </div>
                                    </div>
                                    </form>
                                </div>
                            </div>
                        -->
                                    
                            <div class="input-field col s12">
                                <input placeholder="link" name="link" id="link" type="text" class="validate" required>
                                <label for="link">Sube el link de tu vídeo</label>
                            </div>
                            <div class="input-field file-field col s12">
                                <div class = "btn red darken-4 waves-effect" id="btnImgs">
                                    <span class="material-icons" style="margin-top: 1.2vh;">
                                        add_photo_alternate
                                    </span>
                                    <input type = "file" name="images" multiple required />
                                </div>
                                <div class = "file-path-wrapper">
                                    <input class = "file-path validate" id="imgs" type = "text"
                                    placeholder = "Agregar Imágenes de la receta" />
                                </div>
                            </div>
                            <div class="input-field col s5 offset-s4">
                                <input type="submit"  class="btn red darken-4 center" value="Agregar">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
    </div>
</div>
<script>
    function Ingrediente(ingrediente) {
        this.ingrediente = ingrediente;
    }
    function obtenerIngredientes() { // Obtengo los ingredientes del input
        var chipInstance = M.Chips.getInstance($(".chips"));
        console.log(chipInstance.chipsData);
        console.log(chipInstance.selectChip(2));
        return chipInstance	;
    }
    function crearIngredientes() {
        var ing = new Ingrediente(obtenerIngredientes());
        document.write(ing.ingrediente);
    }
    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.chips');
        var instances = M.Chips.init(elems, options);
    });
</script>
{% endblock %}